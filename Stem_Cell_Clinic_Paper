import matplotlib.pyplot as plt
from mpl_toolkits.basemap import Basemap
from geopy.geocoders import Nominatim
from geopy.exc import GeocoderUnavailable

def plot_us_cities(cities):
    # Create a map
    plt.figure(figsize=(10, 6))
    map = Basemap(llcrnrlon=-119, llcrnrlat=22, urcrnrlon=-64, urcrnrlat=49,
                  projection='lcc', lat_1=33, lat_2=45, lon_0=-95)

    # Load the shapefile of the United States
    map.readshapefile('st99_d00', name='states', drawbounds=True)

    # Geocode each city and plot it
    geolocator = Nominatim(user_agent="city_locator")
    for city in cities:
        try:
            location = geolocator.geocode(city)
            if location:
                x, y = map(location.longitude, location.latitude)
                map.plot(x, y, 'ro', markersize=5)
        except GeocoderUnavailable:
            print(f"Geocoding service is unavailable. Could not geocode {city}. Skipping...")

    plt.title('Cities in the United States')
    plt.show()

# Example usage:
cities = ["New York", "Los Angeles", "Chicago", "Houston", "Phoenix", "Philadelphia"]
plot_us_cities(cities)
